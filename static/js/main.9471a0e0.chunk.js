(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(18),a=n.n(s),i=n(6),l=(n(24),n(25),n(10)),o=n(2),d=n(9),x=n.n(d),u=n(12),b="https://student-json-api.lidemy.me",m=function(e){return fetch("".concat(b,"/posts?id=").concat(e)).then((function(e){return e.json()}))},j=function(){var e=localStorage.getItem("token");return fetch("".concat(b,"/me"),{headers:{authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()}))},p=Object(r.createContext)(null),h=Object(r.createContext)(null),f=n(0),O=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(r.useContext)(p).setUser,a=Object(o.f)();return Object(f.jsx)("div",{className:"flex h-screen bg-pink-200",children:Object(f.jsxs)("div",{className:"w-full max-w-md px-16 py-10 m-auto bg-white border rounded-lg border-primaryBorder shadow-default",children:[Object(f.jsx)("h1",{className:"mt-4 mb-12 text-2xl font-medium text-center text-primary",children:"Log in to your account \ud83d\udd10"}),Object(f.jsxs)("form",{onSubmit:function(e){var t,n;e.preventDefault(),function(e,t){return fetch("".concat(b,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:e,password:t})}).then((function(e){return e.json()}))}(null===(t=e.target.elements.username)||void 0===t?void 0:t.value,null===(n=e.target.elements.password)||void 0===n?void 0:n.value).then((function(e){if(0===e.ok)return c(e.message);var t=e.token;localStorage.setItem("token",t),j().then((function(e){if(1!==e.ok)return localStorage.setItem(null),c(e.toString());s(e.data),a.push("/")}))}))},children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"username",children:"Username"}),Object(f.jsx)("input",{type:"text",className:"w-full p-2 text-primary border rounded-md outline-none text-sm transition duration-150 ease-in-out mb-4",id:"username",placeholder:"Your username"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"password",children:"Password"}),Object(f.jsx)("input",{type:"password",className:"w-full p-2 text-primary border rounded-md outline-none text-sm transition duration-150 ease-in-out mb-4",id:"password",placeholder:"Your Password"})]}),n&&Object(f.jsx)("div",{className:"text-red-500",children:n}),Object(f.jsx)("div",{className:"flex items-center justify-center mt-6",children:Object(f.jsx)("button",{className:" bg-pink-500 py-2 px-4 text-sm text-white rounded border border-green focus:outline-none focus:border-green-dark",children:"Login"})})]})]})})},g=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(r.useContext)(p).setUser,a=Object(o.f)();return Object(f.jsx)("div",{className:"flex h-auto bg-pink-200",children:Object(f.jsxs)("div",{className:"w-full max-w-md px-16 py-10 m-auto my-8 bg-white border rounded-lg border-primaryBorder shadow-default",children:[Object(f.jsx)("h1",{className:"mt-4 mb-12 text-2xl font-medium text-center text-primary",children:"Create a new account \ud83d\udd10"}),Object(f.jsxs)("form",{onSubmit:function(e){var t,n,r,i;e.preventDefault();var l=null===(t=e.target.elements.nickname)||void 0===t?void 0:t.value,o=null===(n=e.target.elements.username)||void 0===n?void 0:n.value,d=null===(r=e.target.elements.password)||void 0===r?void 0:r.value;if(d!==(null===(i=e.target.elements.passwordAgain)||void 0===i?void 0:i.value))return c("\u5169\u6b21\u5bc6\u78bc\u4e0d\u76f8\u540c");(function(e,t,n){return fetch("".concat(b,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:e,username:t,password:n})}).then((function(e){return e.json()}))})(l,o,d).then((function(e){if(0===e.ok)return c(e.message);1===e.ok&&(localStorage.setItem("token",e.token),j().then((function(t){if(1!==e.ok)return localStorage.setItem("token",null),c(t.toString());s(t.data),a.push("/")})))}))},children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"username",children:"Nickname"}),Object(f.jsx)("input",{type:"text",className:"w-full p-2 text-primary border rounded-md outline-none text-sm transition duration-150 ease-in-out mb-4",id:"nickname",placeholder:"Your nickname"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"username",children:"Username"}),Object(f.jsx)("input",{type:"text",className:"w-full p-2 text-primary border rounded-md outline-none text-sm transition duration-150 ease-in-out mb-4",id:"username",placeholder:"Your username"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"password",children:"Password"}),Object(f.jsx)("input",{type:"password",className:"w-full p-2 text-primary border rounded-md outline-none text-sm transition duration-150 ease-in-out mb-4",id:"password",placeholder:"Your Password"})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"password",children:"Password Again"}),Object(f.jsx)("input",{type:"password",className:"w-full p-2 text-primary border rounded-md outline-none text-sm transition duration-150 ease-in-out mb-4",id:"passwordAgain",placeholder:"Your Password Again"})]}),n&&Object(f.jsx)("div",{className:"text-red-500",children:n}),Object(f.jsx)("div",{className:"flex items-center justify-center mt-6",children:Object(f.jsx)("button",{className:" bg-pink-500 py-2 px-4 text-sm text-white rounded border border-green focus:outline-none focus:border-green-dark",children:"Register"})})]})]})})},w=function(){var e=localStorage.getItem("token"),t=Object(o.f)(),n=Object(r.useContext)(h),c=n.newArticleAmount,s=n.setNewArticleAmount;return Object(f.jsx)("div",{className:"py-12 bg-pink-200 border-4 ",children:Object(f.jsx)("div",{className:"mx-auto rounded-lg max-w-7xl sm:px-6 lg:px-8",children:Object(f.jsx)("div",{className:"overflow-hidden bg-pink-200 sm:rounded-lg",children:Object(f.jsx)("div",{className:"p-6 bg-pink-200 border-b border-gray-200",children:Object(f.jsxs)("form",{method:"POST",action:"action.php",onSubmit:function(n){var r,a;if(n.preventDefault(),!e)return alert("\u9084\u6c92\u6709\u767b\u5165\u5594\uff0c\u8acb\u767b\u5165\u5f8c\u518d\u8a66\u4e00\u6b21");(function(e,t,n){return fetch("".concat(b,"/posts"),{method:"POST",headers:{"content-type":"application/json",authorization:"Bearer ".concat(n)},body:JSON.stringify({title:e,body:t})}).then((function(e){return e.json()}))})(null===(r=n.target.elements.title)||void 0===r?void 0:r.value,null===(a=n.target.elements.content)||void 0===a?void 0:a.value,e).then((function(){s(c+1),t.push("/")}))},children:[Object(f.jsxs)("div",{className:"mb-4",children:[Object(f.jsxs)("label",{className:"text-xl text-gray-600",children:["Title ",Object(f.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(f.jsx)("br",{}),Object(f.jsx)("input",{type:"text",className:"w-full p-2 border-2 border-gray-300",name:"title",id:"title",required:!0})]}),Object(f.jsxs)("div",{className:"mb-8",children:[Object(f.jsxs)("label",{className:"text-xl text-gray-600",children:["Content ",Object(f.jsx)("span",{className:"text-red-500",children:"*"})]}),Object(f.jsx)("br",{}),Object(f.jsx)("textarea",{name:"content",className:"w-full border-2 border-gray-500 h-96"})]}),Object(f.jsx)("div",{className:"flex p-1",children:Object(f.jsx)("button",{className:"p-3 text-white bg-pink-400 rounded-md hover:bg-pink-500 ",required:!0,children:"Submit"})})]})})})})})},y=function(){return Object(f.jsx)("div",{className:"flex h-screen bg-pink-200 bg-gray-bg1 rounded-xl",children:Object(f.jsxs)("div",{className:"w-full max-w-md px-16 py-10 m-auto bg-white border border-pink-500 rounded-2xl shadow-default",children:[Object(f.jsx)("h1",{className:"mt-4 mb-12 text-5xl font-medium text-center text-pink-500 text-primary",children:"a_u_z"}),Object(f.jsx)("h4",{className:"mt-4 mb-12 text-xl font-medium text-center text-pink-400 text-primary",children:"be better"}),Object(f.jsx)("h4",{className:"mt-4 mb-12 text-xl font-medium text-center text-pink-400 text-primary",children:"and"}),Object(f.jsx)("h4",{className:"mt-4 mb-12 text-xl font-medium text-center text-pink-400 text-primary",children:"enjoy every moment"})]})})};var v=function(e){var t=e.articlesAmount,n=e.setNowPage,r=e.nowPage,c=Math.ceil(t/5),s=Array(c).fill(null);function a(e){n(e)}function i(e){var t=e.pageNumber;return Object(f.jsxs)("button",{className:"mx-1 inline-block my-3 py-1.5 px-2 border-2 bg-pink-200 text-gray-700  rounded-md border-pink-200 border-double",onClick:function(){return a(t)},children:["\u7b2c",t,"\u9801"]})}return Object(f.jsx)("div",{className:"text-center ",children:s.map((function(e,t){return r===t+1?Object(f.jsxs)("button",{className:"mx-1 inline-block my-3 py-1.5 px-2 border-2 bg-pink-600 text-white bg-opacity-70  rounded-md border-pink-600 border-opacity-10 border-double",onClick:function(){return a(r)},children:["\u7b2c",r,"\u9801"]},t+1):t+1===1||t+1===c||Math.abs(r-t-1)<=1?Object(f.jsx)(i,{pageNumber:t+1},t+1):Math.abs(r-t-1)<=2?Object(f.jsx)("button",{className:"mx-1 inline-block my-3 py-1.5 px-2 border-2 bg-pink-200 text-gray-700  rounded-md border-pink-200 border-double",children:".........."},t+1):void 0}))})};var N=function(e){var t=e.singleArticle,n=e.setSingleArticle;return Object(f.jsx)("div",{className:"flex h-auto bg-pink-200 bg-gray-bg1 rounded-xl",children:Object(f.jsxs)("div",{className:"w-full max-w-2xl px-12 py-10 m-auto my-8 bg-white border border-pink-500 rounded-2xl shadow-default",children:[Object(f.jsx)("h1",{className:"mt-4 mb-8 text-3xl font-medium tracking-widest text-center text-pink-500 text-primary",children:t.title}),Object(f.jsxs)("h4",{className:"mt-2 mb-12 font-medium tracking-widest text-left text-pink-400 text-m text-primary",children:["\u65e5\u671f\uff1a",new Date(t.createdAt).toLocaleString()]}),Object(f.jsx)("h4",{className:"mt-4 mb-12 text-xl leading-8 tracking-widest text-left text-pink-400 text-primary",children:t.body}),Object(f.jsx)("button",{onClick:function(){n(null)},className:" inline-block p-1.5 border-2 border-opacity-75 rounded-md border-pink-400 border-double mt-4 mb-12 text-xl leading-8 tracking-widest text-center text-pink-400 text-primary",children:"\u56de\u5230\u4e0a\u4e00\u9801"})]})})};function k(e){var t=e.article,n=e.handleClickSingleArticle;return t.body.length>150?Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{className:"w-12 px-6 py-4 whitespace-nowrap",children:Object(f.jsx)("div",{className:"flex items-center",children:Object(f.jsx)("div",{className:"overflow-x-hidden font-medium text-gray-900 w-96 text-m ",children:t.title})})}),Object(f.jsxs)("td",{className:"p-5 text-gray-900 break-all text-m",children:[t.body.substring(0,150),Object(f.jsx)("span",{className:"inline-block mx-2",children:" "}),"......",Object(f.jsx)("span",{className:"inline-block mx-2",children:" "}),Object(f.jsx)("button",{className:"inline-block p-1.5 border-2 border-opacity-75 rounded-md border-pink-400 border-double",onClick:function(){return n(t.id)},children:"\u95b1\u8b80\u66f4\u591a"})]}),Object(f.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(f.jsx)("div",{className:"px-2 py-3 text-gray-900 whitespace-nowrap text-m",children:t.userId})}),Object(f.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(f.jsx)("div",{className:"text-gray-900 text-m",children:new Date(t.createdAt).toLocaleString()})})]},t.id):Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{className:"w-12 px-6 py-4 whitespace-nowrap",children:Object(f.jsx)("div",{className:"flex items-center ",children:Object(f.jsx)("div",{className:"overflow-x-hidden font-medium text-gray-900 w-96 text-m ",children:t.title})})}),Object(f.jsx)("td",{className:"p-5 text-gray-900 break-all text-m",children:t.body}),Object(f.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(f.jsx)("div",{className:"px-2 py-3 text-gray-900 whitespace-nowrap text-m",children:t.userId})}),Object(f.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(f.jsx)("div",{className:"text-gray-900 text-m",children:new Date(t.createdAt).toLocaleString()})})]},t.id)}var S=function(e){var t=e.articles,n=e.singleArticle,r=e.setSingleArticle;function c(e){return s.apply(this,arguments)}function s(){return(s=Object(u.a)(x.a.mark((function e(t){var n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:n=e.sent,r(n[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(f.jsx)(f.Fragment,{children:n?Object(f.jsx)(N,{singleArticle:n,setSingleArticle:r}):Object(f.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 ",children:[Object(f.jsx)("thead",{className:"bg-pink-300",children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{scope:"col",className:"px-6 py-3 font-medium tracking-wider text-left text-gray-500 uppercase text-m",children:"TITLE"}),Object(f.jsx)("th",{scope:"col",className:"px-6 py-3 font-medium tracking-wider text-left text-gray-500 uppercase text-m",children:"CONTENT"}),Object(f.jsx)("th",{scope:"col",className:"px-6 py-4 font-medium tracking-wider text-left text-gray-500 uppercase text-m",children:"USERID"}),Object(f.jsx)("th",{scope:"col",className:"px-6 py-3 font-medium tracking-wider text-left text-gray-500 uppercase text-m",children:"CREATEDAT"})]})}),Object(f.jsx)("tbody",{className:"bg-pink-100 divide-y-2 divide-pink-300",children:t.map((function(e){return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(k,{article:e,handleClickSingleArticle:c},e.id)})}))})]})})},A=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(null),a=Object(i.a)(s,2),l=a[0],o=a[1],d=Object(r.useState)(null),m=Object(i.a)(d,2),j=m[0],p=m[1],O=Object(r.useContext)(h).newArticleAmount,g=Object(r.useState)(1),w=Object(i.a)(g,2),y=w[0],N=w[1];return Object(r.useEffect)((function(){(function(e){function t(){return(t=Object(u.a)(x.a.mark((function t(){var n,r,c,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("".concat(b,"/posts?_sort=createdAt&_order=desc&_page=").concat(e,"&_limit=5"));case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,c=n.headers.get("x-total-count"),s={articles:r,articlesAmount:c},t.abrupt("return",s);case 12:t.prev=12,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}return function(){return t.apply(this,arguments)}()})(y).then((function(e){c(e.articles),o(e.articlesAmount)}))}),[y,O]),Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(S,{articles:n,singleArticle:j,setSingleArticle:p}),j?"":Object(f.jsx)(v,{articlesAmount:l,setNowPage:N,nowPage:y})]})};function C(){var e=Object(r.useContext)(p),t=e.user,n=e.setUser;return j(),Object(f.jsx)("nav",{className:"relative flex flex-wrap items-center justify-between px-2 py-4 my-4 bg-pink-500 border shadow rounded-xl",children:Object(f.jsxs)("div",{className:"container flex flex-wrap items-center justify-between px-4 mx-auto",children:[Object(f.jsxs)("div",{className:"relative flex justify-between w-full px-4 lg:w-auto lg:static lg:block lg:justify-start",children:[Object(f.jsx)("a",{className:"inline-block py-2 mr-4 text-4xl font-bold leading-relaxed tracking-widest text-white whitespace-nowrap",href:"/",children:"React \u90e8\u843d\u683c"})," ",Object(f.jsx)("span",{className:"inline-block py-2 text-2xl font-bold leading-relaxed tracking-widest text-white ml-9 whitespace-nowrap",children:"\u3055\u304f\u3089"}),Object(f.jsx)("button",{className:"block px-3 py-1 text-xl leading-none text-white bg-transparent border border-transparent border-solid rounded outline-none cursor-pointer lg:hidden focus:outline-none",type:"button",children:Object(f.jsx)("i",{className:"fas fa-bars"})})]}),Object(f.jsx)("div",{className:"lg:flex flex-grow items-center",id:"example-navbar-info",children:Object(f.jsxs)("ul",{className:"flex flex-col list-none lg:flex-row lg:ml-auto",children:[Object(f.jsx)("li",{className:"nav-item",children:Object(f.jsx)("a",{className:"flex items-center px-3 py-2 text-xl font-bold leading-snug text-white uppercase hover:opacity-75",href:"#about-me",children:"\u95dc\u65bc\u6211"})}),Object(f.jsx)("li",{className:"mx-4 nav-item",children:t&&Object(f.jsx)("a",{className:"flex items-center px-3 py-2 text-xl font-bold leading-snug text-white uppercase hover:opacity-75",href:"#add-article",children:"\u767c\u8868\u6587\u7ae0"})}),Object(f.jsx)("li",{className:"mx-4 nav-item",children:!t&&Object(f.jsx)("a",{className:"flex items-center px-3 py-2 text-xl font-bold leading-snug text-white uppercase hover:opacity-75",href:"#/register",children:"\u8a3b\u518a"})}),Object(f.jsxs)("li",{className:"mx-4 nav-item",children:[t&&Object(f.jsx)("button",{className:"flex items-center px-3 py-2 text-xl font-bold leading-snug text-white uppercase hover:opacity-75",onClick:function(){localStorage.setItem("token",""),n(null),alert("\u767b\u51fa\u6210\u529f\uff5e\uff5e")},children:"\u767b\u51fa"}),!t&&Object(f.jsx)("a",{className:"flex items-center px-3 py-2 text-xl font-bold leading-snug text-white uppercase hover:opacity-75",href:"#/login",children:"\u767b\u5165"})]})]})})]})})}var P=function(){var e=Object(r.useState)(null),t=Object(i.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){j().then((function(e){1!==e.ok?localStorage.setItem("token",null):c(e.data)}))}),[]);var s=Object(r.useState)(0),a=Object(i.a)(s,2),d=a[0],x=a[1];return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(p.Provider,{value:{user:n,setUser:c},children:Object(f.jsx)(h.Provider,{value:{newArticleAmount:d,setNewArticleAmount:x},children:Object(f.jsx)("div",{className:"flex flex-wrap py-5",children:Object(f.jsxs)("div",{className:"w-full px-14 ",children:[Object(f.jsx)(C,{}),Object(f.jsx)("div",{className:"flex flex-col",children:Object(f.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(f.jsx)("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:Object(f.jsx)("div",{className:"overflow-hidden border shadow rounded-2xl sm:rounded-lg",children:Object(f.jsx)(l.a,{children:Object(f.jsxs)(o.c,{children:[Object(f.jsx)(o.a,{exact:!0,path:"/",children:Object(f.jsx)(A,{})}),Object(f.jsx)(o.a,{path:"/login",children:Object(f.jsx)(O,{})}),Object(f.jsx)(o.a,{path:"/register",children:Object(f.jsx)(g,{})}),Object(f.jsx)(o.a,{path:"/add-article",children:Object(f.jsx)(w,{})}),Object(f.jsx)(o.a,{path:"/about-me",children:Object(f.jsx)(y,{})})]})})})})})})]})})})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};a.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(P,{})}),document.getElementById("root")),F()}},[[33,1,2]]]);
//# sourceMappingURL=main.9471a0e0.chunk.js.map